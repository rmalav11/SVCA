(this["webpackJsonpadmin-need"]=this["webpackJsonpadmin-need"]||[]).push([[0],{208:function(e,t,s){},209:function(e,t,s){},304:function(e,t,s){},305:function(e,t,s){},306:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),i=s(39),o=s.n(i),r=(s(208),s(28)),d=s(29),l=s(36),c=s(35),u=s(34),h=(s.p,s(209),s(196)),j=s(197),p=s.n(j),b=s(203),m=s.n(b),f=s(23),O=s.n(f),x=function(e,t,s){localStorage.token&&O.a.ajax({type:"GET",url:"https://sv-communityadvocates.org/api/react/needs/"+e+"/",headers:{Authorization:"token "+localStorage.token},success:function(e){t&&t(e)},error:function(e){s&&s(e)}})},g=function(e,t,s){localStorage.token&&O.a.ajax({type:"GET",url:"https://sv-communityadvocates.org/api/react/needs-working/?response="+e,headers:{Authorization:"token "+localStorage.token},success:function(e){t&&t(e)},error:function(e){s&&s(e)}})},v=s(110),y=(s(111),s(121)),w=s(7),k=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={},a.updateWorking=a.updateWorking.bind(Object(l.a)(a)),a.deleteWorking=a.deleteWorking.bind(Object(l.a)(a)),a.hideModal=a.hideModal.bind(Object(l.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){}},{key:"hideModal",value:function(){O()("body").removeClass("modal-open"),O()(".modal-backdrop").remove(),O()("body").removeAttr("data-bs-overflow"),O()("body").removeAttr("style")}},{key:"deleteWorking",value:function(){var e=this,t=v.a.getInstance(document.getElementById("working-edit-"+this.props.id),{});console.log(t),console.log("working-edit-"+this.props.id),O.a.ajax({type:"DELETE",url:"https://sv-communityadvocates.org/api/react/needs-working/"+e.props.id+"/",headers:{Authorization:"token "+localStorage.token},error:function(e){console.log(e),y.a.error({message:"Delete failed",description:"An error happened, please try again later."})},success:function(s){e.props.updateData(),y.a.success({message:"Delete successfully",description:"Agency's Entries deleted."}),t.hide(),e.hideModal()}})}},{key:"updateWorking",value:function(e){var t=v.a.getInstance(document.getElementById("working-edit-"+this.props.id),{});e.preventDefault();var s=this;O.a.ajax({type:"PATCH",url:"https://sv-communityadvocates.org/api/react/needs-working/"+s.props.id+"/",headers:{Authorization:"token "+localStorage.token},data:O()("#working-edit-form"+s.props.id).serialize(),error:function(e){console.log(e),y.a.error({message:"Update failed",description:"An error happened, please try again later."})},success:function(e){O()("agency_edit_"+s.props.id).val(e.agency),O()("need_edit_"+s.props.id).val(e.need),O()("need_met_edit_"+s.props.id).val(e.need_met),s.props.updateData(),y.a.success({message:"Update successfully",description:"Follow up information updated."}),t.hide(),s.hideModal()}})}},{key:"render",value:function(){return Object(w.jsx)("div",{className:"modal fade",id:"working-edit-"+this.props.id,"data-bs-backdrop":"static",tabIndex:"-1","aria-labelledby":"working-edit-label","aria-hidden":"true",children:Object(w.jsx)("div",{className:"modal-dialog",children:Object(w.jsxs)("div",{className:"modal-content",children:[Object(w.jsxs)("div",{className:"modal-header",children:[Object(w.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Agency response edit"}),Object(w.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(w.jsx)("div",{className:"modal-body",children:Object(w.jsxs)("div",{className:"container-fluid",children:[Object(w.jsx)("form",{id:"working-edit-form"+this.props.id,hidden:!0,onSubmit:this.updateWorking}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsxs)("div",{className:"col-sm",children:[Object(w.jsx)("label",{for:"agency_edit_"+this.props.id,class:"form-label",children:"AGENCY/PERSON/ORG"}),Object(w.jsx)("input",{form:"working-edit-form"+this.props.id,type:"text",className:"form-control",name:"agency",id:"agency_edit_"+this.props.id,defaultValue:this.props.agency})]}),Object(w.jsxs)("div",{className:"col-sm",children:[Object(w.jsx)("label",{for:"need_edit_"+this.props.id,class:"form-label",children:"NEED"}),Object(w.jsx)("input",{form:"working-edit-form"+this.props.id,type:"text",className:"form-control",name:"need",id:"need_edit_"+this.props.id,defaultValue:this.props.need})]})]}),Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{for:"need_met_edit_"+this.props.id,class:"form-label",children:"NEED MET"}),Object(w.jsx)("textarea",{form:"working-edit-form"+this.props.id,className:"form-control",name:"need_met",id:"need_met_edit_"+this.props.id,defaultValue:this.props.need_met})]})})]})}),Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"modal-footer justify-content-between",children:[Object(w.jsx)("button",{type:"button",className:"btn btn-danger mr-auto",onClick:this.deleteWorking,children:"Delete"}),Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{type:"button",className:"btn btn-secondary m-1",onClick:this.resetData,"data-bs-dismiss":"modal",children:"Close"}),Object(w.jsx)("button",{form:"working-edit-form"+this.props.id,type:"submit",className:"btn btn-primary m-1",children:"Save changes"})]})]})})]})})})}}]),s}(n.a.Component),N=(s(304),function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={workData:e.workData},a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.updateData=a.updateData.bind(Object(l.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;g(this.props.need_id,(function(t){console.log(t),e.setState({workData:t})}))}},{key:"updateData",value:function(){var e=this;g(this.props.need_id,(function(t){e.setState({workData:t})}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(e.target);var t=this;O.a.ajax({type:"POST",url:"https://sv-communityadvocates.org/api/react/needs-working/",headers:{Authorization:"token "+localStorage.token},data:O()("#working-form").serialize(),error:function(e){console.log(e)},success:function(s){console.log(O()("#working-form").serialize()),console.log("success start"),e.target.reset(),console.log(t.props),g(t.props.need_id,(function(e){t.setState({workData:e})}))}})}},{key:"render",value:function(){var e=this;return null==this.state.workData?Object(w.jsx)("div",{class:"spinner-border text-primary",role:"status",children:Object(w.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):Object(w.jsx)("div",{className:"row div-card my-3",children:Object(w.jsxs)("div",{className:"rounded-1 shadow-sm p-md-5 p-2 table-responsive",children:[Object(w.jsx)("h4",{className:"",style:{display:"inline"},children:"AGENCIES, INDIVIDUALS WORKING ON NEEDS"}),Object(w.jsxs)("table",{class:"table table-hover custom-table ",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"AGENCY/PERSON/ORG"}),Object(w.jsx)("th",{children:"NEED"}),Object(w.jsx)("th",{children:"NEED MET"}),Object(w.jsx)("th",{})]})}),Object(w.jsxs)("tbody",{children:[console.log(this.state.workData),this.state.workData.map((function(t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t.agency}),Object(w.jsx)("td",{children:t.need}),Object(w.jsx)("td",{children:t.need_met}),Object(w.jsx)("td",{children:Object(w.jsx)("button",{type:"button",className:"btn btn-primary float-end","data-bs-toggle":"modal","data-bs-target":"#working-edit-"+t.id,children:Object(w.jsx)("i",{class:"far fa-edit"})})}),Object(w.jsx)("td",{children:Object(w.jsx)(k,{id:t.id,agency:t.agency,need:t.need,need_met:t.need_met,updateData:e.updateData})})]},t.id)})),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:Object(w.jsx)("div",{children:Object(w.jsx)("input",{form:"working-form",id:"new_agency",className:"form-control",name:"agency",type:"text",placeholder:"new agency/person",required:!0})})}),Object(w.jsx)("td",{children:Object(w.jsx)("div",{children:Object(w.jsx)("input",{form:"working-form",id:"new_need",className:"form-control",name:"need",type:"text",placeholder:"need"})})}),Object(w.jsx)("td",{colSpan:"2",children:Object(w.jsx)("div",{children:Object(w.jsx)("textarea",{form:"working-form",id:"new_need_met",className:"form-control",name:"need_met",type:"text",placeholder:"need met",required:!0})})})]},"edit-cell")]})]}),Object(w.jsx)("form",{id:"working-form",hidden:!0,onSubmit:this.handleSubmit,children:Object(w.jsx)("input",{form:"working-form",name:"response",value:this.props.need_id})}),Object(w.jsx)("button",{form:"working-form",type:"submit",class:"btn btn-outline-secondary float-end",children:"Add new working"})]})})}}]),s}(n.a.Component)),_=(s(305),function(e,t,s){localStorage.token&&O.a.ajax({type:"GET",url:"https://sv-communityadvocates.org/api/react/need-follow-up/?response="+e,headers:{Authorization:"token "+localStorage.token},success:function(e){t&&t(e)},error:function(e){s&&s(e)}})}),S=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={followup:null},a.updateFollowup=a.updateFollowup.bind(Object(l.a)(a)),a.resetData=a.resetData.bind(Object(l.a)(a)),a.deleteFollowup=a.deleteFollowup.bind(Object(l.a)(a)),a.hideModal=a.hideModal.bind(Object(l.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){}},{key:"resetData",value:function(){O()("#worker_edit_"+this.props.id).val(this.props.worker),O()("#date_edit_"+this.props.id).val(this.props.date),O()("#notes_edit_"+this.props.id).val(this.props.note)}},{key:"hideModal",value:function(){v.a.getInstance(document.getElementById("followup-edit-"+this.props.id),{}).hide(),O()("body").removeClass("modal-open"),O()(".modal-backdrop").remove(),O()("body").removeAttr("data-bs-overflow"),O()("body").removeAttr("style")}},{key:"deleteFollowup",value:function(){var e=this;O.a.ajax({type:"DELETE",url:"https://sv-communityadvocates.org/api/react/need-follow-up/"+e.props.id+"/",headers:{Authorization:"token "+localStorage.token},error:function(e){console.log(e),y.a.error({message:"Delete failed",description:"An error happened, please try again later."})},success:function(t){e.props.updateData(),y.a.success({message:"Delete successfully",description:"Follow up deleted."}),e.hideModal()}})}},{key:"updateFollowup",value:function(e){e.preventDefault();var t=this;O.a.ajax({type:"PATCH",url:"https://sv-communityadvocates.org/api/react/need-follow-up/"+t.props.id+"/",headers:{Authorization:"token "+localStorage.token},data:O()("#followup-edit-form"+this.props.id).serialize(),error:function(e){console.log(e),y.a.error({message:"Update failed",description:"An error happened, please try again later."})},success:function(e){O()("#worker_edit_"+t.props.id).val(e.worker),O()("#date_edit_"+t.props.id).val(e.date),O()("#notes_edit_"+t.props.id).val(e.note),t.props.updateData(),y.a.success({message:"Update successfully",description:"Follow up information updated."}),t.hideModal(),t.resetData()}})}},{key:"render",value:function(){return Object(w.jsx)("div",{className:"modal fade",id:"followup-edit-"+this.props.id,"data-bs-backdrop":"static",tabIndex:"-1","aria-labelledby":"followup-edit-label","aria-hidden":"true",children:Object(w.jsx)("div",{className:"modal-dialog",children:Object(w.jsxs)("div",{className:"modal-content",children:[Object(w.jsxs)("div",{className:"modal-header",children:[Object(w.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Follow up edit"}),Object(w.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(w.jsx)("div",{className:"modal-body",children:Object(w.jsxs)("div",{className:"container-fluid",children:[Object(w.jsx)("form",{id:"followup-edit-form"+this.props.id,hidden:!0,onSubmit:this.updateFollowup}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsxs)("div",{className:"col-sm",children:[Object(w.jsx)("label",{for:"worker_edit"+this.props.id,class:"form-label",children:"Worker"}),Object(w.jsx)("input",{form:"followup-edit-form"+this.props.id,type:"text",className:"form-control",name:"worker",id:"worker_edit_"+this.props.id,defaultValue:this.props.worker})]}),Object(w.jsxs)("div",{className:"col-sm",children:[Object(w.jsx)("label",{for:"date_edit_"+this.props.id,class:"form-label",children:"Date"}),Object(w.jsx)("input",{form:"followup-edit-form"+this.props.id,type:"date",className:"form-control",name:"date",id:"date_edit_"+this.props.id,defaultValue:this.props.date})]})]}),Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{for:"notes_edit_"+this.props.id,class:"form-label",children:"Notes"}),Object(w.jsx)("textarea",{form:"followup-edit-form"+this.props.id,className:"form-control",name:"note",id:"notes_edit_"+this.props.id,defaultValue:this.props.note})]})})]})}),Object(w.jsxs)("div",{className:"modal-footer justify-content-between",children:[Object(w.jsx)("button",{type:"button",className:"btn btn-danger mr-auto",onClick:this.deleteFollowup,children:"Delete"}),Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{type:"button",className:"btn btn-secondary m-1",onClick:this.resetData,"data-bs-dismiss":"modal",children:"Close"}),Object(w.jsx)("button",{form:"followup-edit-form"+this.props.id,type:"submit",className:"btn btn-primary m-1",children:"Save changes"})]})]})]})})})}}]),s}(n.a.Component),E=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={followupData:null},a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.updateData=a.updateData.bind(Object(l.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;_(this.props.need_id,(function(t){e.setState({followupData:t})}))}},{key:"updateData",value:function(){var e=this;_(this.props.need_id,(function(t){e.setState({followupData:t})}))}},{key:"handleSubmit",value:function(e){console.log("follow up handle"),e.preventDefault();var t=this;O.a.ajax({type:"POST",url:"https://sv-communityadvocates.org/api/react/need-follow-up/",headers:{Authorization:"token "+localStorage.token},data:O()("#followup-form").serialize(),error:function(e){console.log(e)},success:function(s){console.log(O()("#followup-form").serialize()),_(t.props.need_id,(function(e){t.setState({followupData:e})})),e.target.reset()}})}},{key:"render",value:function(){var e=this;return null==this.state.followupData?Object(w.jsx)("div",{class:"spinner-border text-primary",role:"status",children:Object(w.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):Object(w.jsx)("div",{className:"row div-card my-3",children:Object(w.jsxs)("div",{className:"rounded-1 shadow-sm p-md-5 p-2 table-responsive",children:[Object(w.jsx)("h4",{className:"",style:{display:"inline"},children:"FOLLOW-UP CASE NOTES"}),Object(w.jsxs)("table",{class:"table table-hover custom-table ",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"WORKER"}),Object(w.jsx)("th",{children:"DATE"}),Object(w.jsx)("th",{children:"NOTES"}),Object(w.jsx)("th",{})]})}),Object(w.jsxs)("tbody",{children:[console.log(this.state.workData),this.state.followupData.map((function(t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t.worker}),Object(w.jsx)("td",{children:t.date}),Object(w.jsx)("td",{children:t.note}),Object(w.jsx)("td",{children:Object(w.jsx)("button",{type:"button",className:"btn btn-primary float-end","data-bs-toggle":"modal","data-bs-target":"#followup-edit-"+t.id,children:Object(w.jsx)("i",{class:"far fa-edit"})})}),Object(w.jsx)("td",{children:Object(w.jsx)(S,{id:t.id,worker:t.worker,date:t.date,note:t.note,updateData:e.updateData})})]},t.id)})),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:Object(w.jsx)("div",{children:Object(w.jsx)("input",{form:"followup-form",id:"new_worker",className:"form-control",name:"worker",type:"text",placeholder:"new worker",required:!0})})}),Object(w.jsx)("td",{children:Object(w.jsx)("div",{children:Object(w.jsx)("input",{form:"followup-form",id:"new_date",className:"form-control",name:"date",type:"date",placeholder:"date",required:!0})})}),Object(w.jsx)("td",{colSpan:"2",children:Object(w.jsx)("div",{children:Object(w.jsx)("textarea",{form:"followup-form",id:"new_note",className:"form-control",name:"note",type:"text",placeholder:"note",required:!0})})})]},"edit-cell")]})]}),Object(w.jsx)("form",{id:"followup-form",hidden:!0,onSubmit:this.handleSubmit,children:Object(w.jsx)("input",{form:"followup-form",name:"response",value:this.props.need_id})}),Object(w.jsx)("button",{form:"followup-form",type:"submit",class:"btn btn-outline-secondary float-end",children:"Add new followup"})]})})}}]),s}(n.a.Component),D=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={need:null,textValue:null,readonly:!0,personaledit:!1},a.handleChange=a.handleChange.bind(Object(l.a)(a)),a.editButton=a.editButton.bind(Object(l.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.personalEditButton=a.personalEditButton.bind(Object(l.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;x(this.props.need_id,(function(t){console.log(t),e.setState({need:t}),e.setState({textValue:t.needs})}))}},{key:"handleChange",value:function(e){this.setState({textValue:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;O.a.ajax({type:"PATCH",url:"https://sv-communityadvocates.org/api/react/needs/"+t.props.need_id+"/",headers:{Authorization:"token "+localStorage.token},data:O()("#request-form").serialize(),error:function(e){console.log(e),y.a.error({message:"Update request failed",description:"An error has happened, please try again later"})},success:function(e){y.a.success({message:"Update request successfully",description:"The request infromation has been updated successfully."}),t.setState({readonly:!0}),x(t.props.need_id,(function(e){console.log(e),t.setState({need:e}),t.setState({textValue:e.needs})}))}})}},{key:"editButton",value:function(e){this.setState({readonly:!this.state.readonly})}},{key:"personalEditButton",value:function(e){}},{key:"render",value:function(){return null==this.state.need?Object(w.jsx)("div",{class:"spinner-border text-primary",role:"status",children:Object(w.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"row div-card my-3",children:Object(w.jsxs)("div",{className:"rounded-1 shadow-sm p-md-5 p-2",children:[Object(w.jsx)("h4",{className:"",style:{display:"inline"},children:"Personal information"}),Object(w.jsx)("a",{type:"button",class:"btn btn-outline-secondary float-end",href:"./edit-info/?id="+this.state.need.id,children:"Edit"}),Object(w.jsx)("div",{className:"custom-div-table container",children:Object(w.jsx)("table",{className:"table custom-table",children:Object(w.jsxs)("tbody",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"ID"}),Object(w.jsx)("td",{id:"personal_id",contentEditable:this.state.personaledit,children:this.state.need.id})]},"id"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"FIRST NAME"}),Object(w.jsx)("td",{id:"personal_first_name",contentEditable:this.state.personaledit,children:this.state.need.first_name})]},"first name"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"LAST NAME"}),Object(w.jsx)("td",{id:"personal_last_name",contentEditable:this.state.personaledit,children:this.state.need.last_name})]},"last_name"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"ADDRESS"}),Object(w.jsx)("td",{id:"personal_address",contentEditable:this.state.personaledit,children:this.state.need.address})]},"address"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"PHONE"}),Object(w.jsx)("td",{id:"personal_phone",contentEditable:this.state.personaledit,children:this.state.need.phone})]},"phone"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"EMAIL"}),Object(w.jsx)("td",{id:"personal_email",contentEditable:this.state.personaledit,children:this.state.need.email})]},"email"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"ETHNICITY"}),Object(w.jsx)("td",{id:"personal_ethnicity",contentEditable:this.state.personaledit,children:this.state.need.ethnicity})]},"ethnicity"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"LANGUAGE"}),Object(w.jsx)("td",{id:"personal_language",contentEditable:this.state.personaledit,children:this.state.need.language})]},"language"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"GENDER"}),Object(w.jsx)("td",{id:"personal_gender",contentEditable:this.state.personaledit,children:this.state.need.gender})]},"gender"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"VULNERABLE GROUP"}),Object(w.jsx)("td",{id:"personal_group",contentEditable:this.state.personaledit,children:this.state.need.vulnerable_groups.map((function(e){return Object(w.jsx)("span",{class:"badge bg-secondary mx-1",children:e})}))})]},"vulnerable_group"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"Family something"}),Object(w.jsxs)("td",{children:["0-18: ",this.state.need.family18,", 18-55: ",this.state.need.family19,", 55+: ",this.state.need.family55]})]},"family-composition"),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"Place holder"}),Object(w.jsx)("td",{})]},"NONE")]})})})]})}),Object(w.jsx)("div",{className:"row div-card my-3",children:Object(w.jsxs)("div",{className:"rounded-1 shadow-sm p-md-5 p-2",children:[Object(w.jsx)("h4",{className:"",style:{display:"inline"},children:"Requests, problems, needs"}),Object(w.jsx)("button",{type:"button",class:"btn btn-outline-secondary float-end",onClick:this.editButton,children:"Edit"}),Object(w.jsx)("textarea",{form:"request-form",name:"needs",className:"form-control my-4",rows:7,value:this.state.textValue,readOnly:this.state.readonly,onChange:this.handleChange}),Object(w.jsx)("form",{id:"request-form",hidden:!0,onSubmit:this.handleSubmit,children:Object(w.jsx)("input",{form:"request-form",name:"id",value:this.props.need_id})}),Object(w.jsx)("button",{form:"request-form",hidden:this.state.readonly,type:"submit",class:"btn btn-outline-secondary float-end",children:"Update assessment"})]})})]})}}]),s}(n.a.Component),A=function(e,t,s){localStorage.token&&O.a.ajax({type:"GET",url:"https://sv-communityadvocates.org/api/react/need-assessment/?response="+e,headers:{Authorization:"token "+localStorage.token},success:function(e){t&&t(e)},error:function(e){s&&s(e)}})},C=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={assessment:null,existed:!1,readonly:!0,textValue:null},a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.createAssessment=a.createAssessment.bind(Object(l.a)(a)),a.patchAssessment=a.patchAssessment.bind(Object(l.a)(a)),a.handleEdit=a.handleEdit.bind(Object(l.a)(a)),a.handleChange=a.handleChange.bind(Object(l.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;A(this.props.need_id,(function(t){console.log(t.length),t.length>0?e.setState({assessment:t[0],existed:!0,textValue:t[0].assessment}):e.setState({assessment:{assessment:null,author:null,date:null,id:null,response:null},existed:!1})}),(function(e){y.a.error({message:"Get Assesment Fail",description:"An error has happened!"})}))}},{key:"handleChange",value:function(e){this.setState({textValue:e.target.value})}},{key:"handleSubmit",value:function(e){this.state.existed?this.patchAssessment(e):this.createAssessment(e)}},{key:"patchAssessment",value:function(e){console.log("Assessment handle"),e.preventDefault();var t=this;O.a.ajax({type:"PATCH",url:"https://sv-communityadvocates.org/api/react/need-assessment/"+this.state.assessment.id+"/",headers:{Authorization:"token "+localStorage.token},data:O()("#assess-form").serialize(),error:function(e){console.log(e),y.a.error({message:"Update assessment failed",description:"Assesment update failed, please try again later."})},success:function(e){t.setState({readonly:!0}),y.a.success({message:"Update assessment successfully",description:"The assessment has been updated successfully."}),A(t.props.need_id,(function(e){e.length>0?t.setState({assessment:e[0],existed:!0,textValue:e[0].assessment}):t.setState({assessment:{assessment:null,author:null,date:null,id:null,response:null},existed:!1})}))}})}},{key:"createAssessment",value:function(e){console.log("Assessment handle"),e.preventDefault();var t=this;O.a.ajax({type:"POST",url:"https://sv-communityadvocates.org/api/react/need-assessment/",headers:{Authorization:"token "+localStorage.token},data:O()("#assess-form").serialize(),error:function(e){console.log(e),y.a.error({message:"Update assessment failed",description:"Assesment update failed, please try again later."})},success:function(e){y.a.success({message:"Update assessment successfully",description:"The assessment has been updated successfully."}),t.setState({readonly:!0}),A(t.props.need_id,(function(e){e.length>0?t.setState({assessment:e[0],existed:!0,textValue:e[0].assessment}):t.setState({assessment:{assessment:null,author:null,date:null,id:null,response:null},existed:!1})}))}})}},{key:"handleEdit",value:function(){console.log("handle edit"),this.setState({readonly:!this.state.readonly})}},{key:"render",value:function(){return null==this.state.assessment?Object(w.jsx)("div",{class:"spinner-border text-primary",role:"status",children:Object(w.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):Object(w.jsx)("div",{className:"row div-card my-3",children:Object(w.jsxs)("div",{className:"rounded-1 shadow-sm p-md-5 p-2",children:[Object(w.jsx)("h4",{className:"",style:{display:"inline"},children:"ASSESSMENT OF LIFE CIRCUMSTANCES"}),Object(w.jsx)("button",{type:"button",class:"btn btn-outline-secondary float-end",onClick:this.handleEdit,children:"Edit"}),Object(w.jsx)("textarea",{form:"assess-form",name:"assessment",className:"form-control my-4",rows:7,readOnly:this.state.readonly,value:this.state.textValue,onChange:this.handleChange}),Object(w.jsx)("form",{id:"assess-form",hidden:!0,onSubmit:this.handleSubmit,children:Object(w.jsx)("input",{form:"assess-form",name:"response",value:this.props.need_id})}),Object(w.jsx)("button",{form:"assess-form",hidden:this.state.readonly,type:"submit",class:"btn btn-outline-secondary float-end",children:"Update assessment"})]})})}}]),s}(n.a.Component),T=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){return Object(r.a)(this,s),t.call(this,e)}return Object(d.a)(s,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"row div-card my-3",children:Object(w.jsxs)("div",{className:"rounded-1 shadow-sm p-md-5 p-2",children:[Object(w.jsx)("h4",{children:"Quick action - is this needed?"}),Object(w.jsx)("p",{children:"Nothing is working in this box, what should be here?"}),Object(w.jsxs)("div",{className:"",children:[Object(w.jsx)("span",{className:"mx-2",children:"Current state: "}),Object(w.jsxs)("div",{className:"btn-group",children:[Object(w.jsx)("button",{type:"button",className:"btn btn-warning dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Need review"}),Object(w.jsxs)("ul",{class:"dropdown-menu",children:[Object(w.jsx)("li",{children:Object(w.jsx)("a",{className:"dropdown-item",href:"#",children:"Need review"})}),Object(w.jsx)("li",{children:Object(w.jsx)("a",{className:"dropdown-item",href:"#",children:"Already reviewed"})}),Object(w.jsx)("li",{children:Object(w.jsx)("a",{className:"dropdown-item",href:"#",children:"Waiting for help"})}),Object(w.jsx)("li",{children:Object(w.jsx)("a",{className:"dropdown-item",href:"#",children:"Finished"})})]})]})]})]})})}}]),s}(n.a.Component),I=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={need:null,working:null},a}return Object(d.a)(s,[{key:"render",value:function(){return Object(w.jsxs)("div",{className:"container",style:{textAlign:"left"},children:[Object(w.jsx)(T,{}),Object(w.jsx)("h3",{children:"Information"}),Object(w.jsx)(D,{need_id:this.props.need_id}),Object(w.jsx)("hr",{class:"dropdown-divider"}),Object(w.jsxs)("h4",{children:["SVCA - currently logged in as ",this.props.username]}),Object(w.jsx)(C,{need_id:this.props.need_id}),Object(w.jsx)(N,{workData:this.state.working,need_id:this.props.need_id}),Object(w.jsx)(E,{need_id:this.props.need_id})]})}}]),s}(n.a.Component),M=s(194),F=s(119),z=(M.a.Header,M.a.Sider);M.a.Content;function V(e){var t=window.location.search.substring(1);console.log(t);var s=t.split("&");console.log(s);for(var a=0;a<s.length;a++){var n=s[a].split("=");if(console.log(n),n[0]==e)return n[1]}return 1}var L=function(e){Object(c.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.state={groups:[],username:"",firstname:"",id:-1,collapsed:!0},Object(h.getLogin)((function(e){console.log(e),a.setState({id:e.id,username:e.username,firstname:e.first_name,groups:e.groups})})),a.toggle=a.toggle.bind(Object(l.a)(a)),a}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(M.a,{children:[Object(w.jsx)(m.a,{siteName:"SVCA",username:this.state.username}),Object(w.jsxs)(M.a,{children:[Object(w.jsx)(z,{theme:"light",trigger:null,collapsible:!0,collapsed:this.state.collapsed,children:Object(w.jsx)(p.a,{permission_groups:this.state.groups,selected:[],collapsed:this.state.collapsed,toggle:function(){return e.toggle()}})}),Object(w.jsxs)(M.a,{className:"site-layout",style:{backgroundColor:"#f8f8f8"},children:[Object(w.jsxs)(F.a,{className:"ms-4",children:[Object(w.jsx)(F.a.Item,{children:"Home"}),Object(w.jsx)(F.a.Item,{children:Object(w.jsx)("a",{href:"/admin/dashboard/",children:"Dashboard"})}),Object(w.jsx)(F.a.Item,{children:"Needs detail"})]}),Object(w.jsxs)("div",{className:"limited-width",children:[Object(w.jsx)("h1",{style:{textAlign:"center"},children:"Need detail"}),Object(w.jsx)(I,{need_id:V("id"),username:this.state.username})]})]})]})]})})}}]),s}(n.a.Component),U=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,311)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,o=t.getTTFB;s(e),a(e),n(e),i(e),o(e)}))};o.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(L,{})}),document.getElementById("root")),U()}},[[306,1,2]]]);
//# sourceMappingURL=main.021316a0.chunk.js.map