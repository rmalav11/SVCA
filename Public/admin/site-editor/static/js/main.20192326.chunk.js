(this["webpackJsonpsite-editor"]=this["webpackJsonpsite-editor"]||[]).push([[0],{248:function(e,t,a){},339:function(e,t,a){},360:function(e,t,a){},363:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(34),s=a.n(o),l=(a(248),a(41)),r=a(42),c=a(50),d=a(49),u=(a(125),a(236)),h=a(223),b=a(237),m=a.n(b),j=a(243),p=a.n(j),g=a(169),f=(a(205),a(118)),v=a(135),O=a(33),x=(a(339),a(186)),y=a.n(x),k=a(66),S=a(233),C=a(100),I=a(224),w=a(191),T=a(98),V=a.n(T),P=a(23),F=(f.a.TabPane,function(e){var t=e.value,a=void 0===t?{}:t,n=e.onChange;return Object(P.jsx)(w.a,{apiKey:"ekx49rg8patd3ort2jen572huxv5fe0fktznizmz6977tan0",value:a,init:{height:500,plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount","fullscreen quickbars save image"],toolbar:"undo redo cancel | formatselect | bold italic underline |                     alignleft aligncenter alignright |                     bullist numlist outdent indent image| code fullscreen |help",toolbar_mode:"floating",menubar:"tool"},onEditorChange:n})}),N=function(e){var t=S.a.useForm(),a=Object(k.a)(t,1)[0],i=Object(n.useState)(!1),o=Object(k.a)(i,2),s=o[0],l=o[1],r=Object(n.useState)(!1),c=Object(k.a)(r,2),d=c[0],u=c[1];return Object(P.jsx)("div",{children:Object(P.jsx)("div",{className:"container py-3",children:Object(P.jsxs)(S.a,{name:"infoUpdate"+e.info.id,onFinish:function(t){console.log("Success:",t),u(!0),V.a.ajax({type:"PATCH",url:"https://sv-communityadvocates.org/api/homepage/siteinfo/"+e.info.id+"/",headers:{Authorization:"token "+localStorage.token},data:t,error:function(e){console.log("error: ",e),v.a.error({message:"An error happened",description:"The value is not updated, please try again"})},success:function(e){v.a.success({message:"Value updated",description:"Information updated!"})},complete:function(){u(!1),e.updateCallback&&e.updateCallback()}})},layout:"vertical",form:a,initialValues:{name:e.info.name,value:e.info.value,note:e.info.note},children:[Object(P.jsx)(S.a.Item,{label:"ID",children:Object(P.jsx)(C.a,{disabled:!0,value:e.info.id})}),Object(P.jsx)(S.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input name of the value!"}],children:Object(P.jsx)(C.a,{})}),Object(P.jsx)(S.a.Item,{label:"Note",name:"note",children:Object(P.jsx)(C.a,{placeholder:"Where would this value be used at?"})}),Object(P.jsx)(S.a.Item,{label:"Value",name:"value",shouldUpdate:!0,rules:[{required:!0,message:"Please provide the value!"}],children:Object(P.jsx)(F,{})}),Object(P.jsxs)(S.a.Item,{children:[Object(P.jsx)(I.a,{placement:"topLeft",onConfirm:function(){l(!0),V.a.ajax({type:"DELETE",url:"https://sv-communityadvocates.org/api/homepage/siteinfo/"+e.info.id+"/",headers:{Authorization:"token "+localStorage.token},error:function(e){console.log("error: ",e),v.a.error({message:"An error happened",description:"The value is not updated, please try again"})},success:function(e){v.a.success({message:"Value updated",description:"Information updated!"})},complete:function(){l(!1),e.updateCallback&&e.updateCallback()}})},title:"Delete this may cause some site to render differently, do you want to continue?",okText:"Yes",children:Object(P.jsx)(O.a,{loading:s,type:"primary",danger:!0,children:"Delete?"})}),Object(P.jsx)(O.a,{loading:d,style:{float:"right"},type:"primary",htmlType:"submit",children:"Update"})]})]})})})},z=a(234),A=function(e){var t=e.value,a=void 0===t?{}:t,n=e.onChange;return Object(P.jsx)(w.a,{apiKey:"ekx49rg8patd3ort2jen572huxv5fe0fktznizmz6977tan0",value:a,init:{height:500,plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount","fullscreen quickbars save"],toolbar:"undo redo cancel | formatselect | bold italic underline |                     alignleft aligncenter alignright |                     bullist numlist outdent indent | code fullscreen |help",toolbar_mode:"sliding",menubar:"tool"},onEditorChange:n})},M=function(e){var t=S.a.useForm(),a=Object(k.a)(t,1)[0],i=Object(n.useState)(!1),o=Object(k.a)(i,2),s=o[0],l=o[1],r=Object(n.useState)(!1),c=Object(k.a)(r,2),d=(c[0],c[1],function(){a.resetFields(),e.toggleModal(!1)});return Object(P.jsx)("div",{children:Object(P.jsx)(z.a,{title:"Add new site's settings",visible:e.modalVisible,confirmLoading:s,onCancel:d,footer:[Object(P.jsx)(O.a,{onClick:d,children:"Cancel"},"cancel"),Object(P.jsx)(O.a,{type:"primary",htmlType:"submit",form:"addInfo",loading:s,children:"Submit"},"submit")],children:Object(P.jsxs)(S.a,{name:"addInfo",onFinish:function(t){console.log("Success:",t),l(!0),y()({method:"POST",url:"https://sv-communityadvocates.org/api/homepage/siteinfo/",headers:{Authorization:"token "+localStorage.token},data:t}).then((function(t){v.a.success({message:"Value added",description:"New value added!"}),a.resetFields(),e.toggleModal(!1)})).catch((function(e){v.a.error({message:"An error happened",description:"No value added"})})).then((function(t){e.updateCallback&&e.updateCallback(),l(!1)}))},layout:"vertical",form:a,initialValues:{name:"",value:"",note:""},children:[Object(P.jsx)(S.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input name of the value!"}],children:Object(P.jsx)(C.a,{})}),Object(P.jsx)(S.a.Item,{label:"Note",name:"note",children:Object(P.jsx)(C.a,{placeholder:"Where would this value be used at?"})}),Object(P.jsx)(S.a.Item,{label:"Value",name:"value",shouldUpdate:!0,rules:[{required:!0,message:"Please provide the value!"}],children:Object(P.jsx)(A,{})})]})})})},E=f.a.TabPane,q=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState({modalVisible:!0})},n.toggleModal=function(e){n.setState({modalVisible:e})},n.listSiteInfo=function(){var e=Object(g.a)(n);y.a.get("https://sv-communityadvocates.org/api/homepage/siteinfo/").then((function(t){console.log(t.data),e.setState({siteInfo:t.data})})).catch((function(e){console.log(e),v.a.error({message:"Unable to retrieve site information",description:"Retrieving site information fail, please try again later."})}))},n.OperationSlot={left:Object(P.jsx)(O.a,{type:"",onClick:n.showModal,children:"Add new value"})},n.state={siteInfo:[],modalVisible:!1},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.listSiteInfo()}},{key:"render",value:function(){var e=this;return Object(P.jsxs)("div",{style:{height:"100%"},children:[Object(P.jsx)(f.a,{style:{height:"100%"},tabPosition:"left",tabBarStyle:{maxWidth:"20%"},tabBarExtraContent:this.OperationSlot,children:this.state.siteInfo.map((function(t){return Object(P.jsx)(E,{tab:t.name,children:Object(P.jsx)(N,{style:{overflow:"scroll"},info:t,updateCallback:e.listSiteInfo})},t.id)}))}),Object(P.jsx)(M,{updateCallback:this.listSiteInfo,toggleModal:this.toggleModal,modalVisible:this.state.modalVisible})]})}}]),a}(n.Component),B=(a(360),a(362),h.a.Content),D=h.a.Sider,L=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).sideBarTrigger=function(){n.setState({collapsed:!n.state.collapsed})},n.state={groups:[],username:"",firstname:"",id:-1,collapsed:!0},Object(u.getLogin)((function(e){n.setState({id:e.id,username:e.username,firstname:e.first_name,groups:e.groups})})),n}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return Object(P.jsx)("div",{children:Object(P.jsxs)(h.a,{style:{height:"100vh"},children:[Object(P.jsx)(p.a,{siteName:"svca",username:this.state.username}),Object(P.jsxs)(h.a,{children:[Object(P.jsx)(D,{theme:"light",trigger:null,collapsible:!0,collapsed:this.state.collapsed,children:Object(P.jsx)(m.a,{permission_groups:this.state.groups,selected:"4",collapsed:this.state.collapsed,toggle:function(){return e.sideBarTrigger()}})}),Object(P.jsx)(h.a,{className:"site-layout",style:{background:"white"},children:Object(P.jsx)(B,{className:"site-layout-background",children:Object(P.jsx)(q,{})})})]})]})})}}]),a}(n.Component),U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,368)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),o(e),s(e)}))};s.a.render(Object(P.jsx)(i.a.StrictMode,{children:Object(P.jsx)(L,{})}),document.getElementById("root")),U()}},[[363,1,2]]]);
//# sourceMappingURL=main.20192326.chunk.js.map