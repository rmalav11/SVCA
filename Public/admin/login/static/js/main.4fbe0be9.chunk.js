(this["webpackJsonplogin-react"]=this["webpackJsonplogin-react"]||[]).push([[0],{124:function(e,n,t){},126:function(e,n,t){},199:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t.n(o),a=t(19),r=t.n(a),s=(t(124),t(88)),i=t.n(s),l=t(103),u=(t(125),t(118)),d=t(202),g=t(203),m=t(36),j=(t(126),t(48)),f=t.n(j),p=t(87),h=t.n(p),b=t(115),x=t(204),y=t(51),v=t(15),w=x.a.confirm,O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=t.exec(n);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null},k=function(){return O("redirect")};var S=function(e){var n=c.a.useRef(),t=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.executeAsync();case 2:t.token=e.sent,n.current.reset(),console.log("Success: ",t),f.a.ajax({type:"POST",url:"https://sv-communityadvocates.org/api/react/login/",data:t,error:function(e){console.log("Error:",e),u.a.error({message:"Login failed",description:"Please check your password and email again"})},success:function(e){1==e.status&&(console.log("Success!"),localStorage.setItem("token",e.token),u.a.success({message:"Login success",description:"Login successfully!"}),O("redirect")?window.location.replace(k()):window.location.replace("/admin/profile/"))}});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){localStorage.token&&f.a.ajax({type:"GET",url:"https://sv-communityadvocates.org/api/react/myinfo/",headers:{Authorization:"token "+localStorage.token},error:function(e){console.log(e),localStorage.removeItem("token")},success:function(e){console.log(e),w({title:"Do you want to loggin again?",icon:Object(v.jsx)(y.a,{}),content:"It seems like you already logged in, do you want to log in again? You may also want to check your account's permission.",okText:"Yes",cancelText:"No",onOk:function(){localStorage.token&&(f.a.ajax({type:"POST",url:"https://sv-communityadvocates.org/api/react/logout/",headers:{Authorization:"token "+localStorage.token},error:function(e){console.log(e)},success:function(e){console.log(e)}}),localStorage.removeItem("token"))},onCancel:function(){O("redirect")?window.location.href=k():window.location.href="/admin/profile/"}})}})}),[]),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"container login-div ",children:[Object(v.jsx)("h2",{className:"text-center pb-4",children:"User login"}),Object(v.jsxs)(d.a,{name:"login",layout:"vertical",initialValues:{device:h.a.description},onFinish:t,onFinishFailed:function(e){console.log("failed: ",e)},children:[Object(v.jsx)(d.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please inut your username!"}],children:Object(v.jsx)(g.a,{})}),Object(v.jsx)(d.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please inut your password!"}],children:Object(v.jsx)(g.a.Password,{})}),Object(v.jsx)(d.a.Item,{hidden:!0,name:"device",children:Object(v.jsx)("input",{})}),Object(v.jsx)(d.a.Item,{children:Object(v.jsx)(m.a,{type:"primary",htmlType:"submit",style:{float:"right"},children:"Submit"})}),Object(v.jsx)(d.a.Item,{children:Object(v.jsxs)("p",{style:{float:"right",fontSize:"large"},children:["or ",Object(v.jsx)("a",{href:"/signup/",children:"create an account"})]})})]}),Object(v.jsx)(b.a,{ref:n,sitekey:"6Lc_7pMbAAAAAJRcdqCiTkI16SR6MwRUKqsHFR9P",size:"invisible"})]})})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,205)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,a=n.getLCP,r=n.getTTFB;t(e),o(e),c(e),a(e),r(e)}))};r.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(S,{})}),document.getElementById("root")),I()}},[[199,1,2]]]);
//# sourceMappingURL=main.4fbe0be9.chunk.js.map