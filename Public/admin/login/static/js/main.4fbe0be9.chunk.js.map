{"version":3,"sources":["tool.js","App.js","reportWebVitals.js","index.js"],"names":["confirm","Modal","getParameterByName","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","getRedirect","App","props","recaptchaRef","React","useRef","onFinish","values","a","current","executeAsync","token","reset","console","log","$","ajax","type","data","error","response","notification","message","description","success","status","localStorage","setItem","useEffect","headers","removeItem","title","icon","ExclamationCircleOutlined","content","okText","cancelText","onOk","onCancel","className","layout","initialValues","device","platform","onFinishFailed","Item","label","rules","required","Password","hidden","htmlType","style","float","fontSize","ref","sitekey","size","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4fbe0be9.chunk.js","sourcesContent":["import $ from 'jquery';\r\nimport { Modal } from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\n\r\nconst { confirm } = Modal;\r\n\r\nexport const getParameterByName = (name, url = window.location.href) => {\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n};\r\n\r\nexport const getRedirect = () => {\r\n    // var currentHost = location.host;\r\n    // var redirectURL = getParameterByName('redirect');\r\n    // if (new URL(redirUrl).host != currentHost)\r\n    //     return false;\r\n    // else\r\n    //     return redirectURL;\r\n\r\n    return getParameterByName('redirect');\r\n}\r\n\r\nexport const checkLogin = () =>{\r\n    if (localStorage.token){\r\n        // if a token is present, check if that token work\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: 'https://sv-communityadvocates.org/api/react/myinfo/',\r\n            headers: {\r\n                'Authorization': 'token ' + localStorage.token\r\n            },\r\n            error: function(response){\r\n                console.log(response);\r\n                localStorage.removeItem('token');\r\n            },\r\n            success: function(response){\r\n                console.log(response);\r\n                confirm({\r\n                    title: 'Do you want to loggin again?',\r\n                    icon: <ExclamationCircleOutlined />,\r\n                    content: 'It seems like you already logged in, do you want to log in again? You may also want to check your account\\'s permission.',\r\n                    okText: \"Yes\",\r\n                    cancelText: \"No\",\r\n                    onOk() {\r\n                        if (localStorage.token){\r\n                            \r\n                            $.ajax({\r\n                                type: 'POST',\r\n                                url: 'https://sv-communityadvocates.org/api/react/logout/',\r\n                                headers: {\r\n                                    'Authorization': 'token ' + localStorage.token\r\n                                },\r\n                                error: function(response){\r\n                                    console.log(response);\r\n                                },\r\n                                success: function(response){\r\n                                    console.log(response);\r\n                                }\r\n                            });\r\n                            localStorage.removeItem('token');\r\n                        }\r\n                    },\r\n                    onCancel() {\r\n                        if (getParameterByName('redirect')){\r\n                            window.location.href= getRedirect();\r\n                        } else{\r\n                            window.location.href = \"/admin/profile/\"\r\n                        }\r\n                    },\r\n                  });\r\n                \r\n                \r\n            }\r\n        });\r\n        // window.location.href=\"dashboard.html\";\r\n    }\r\n}","import React, { useEffect } from 'react';\nimport 'antd/dist/antd.css';\nimport { Form, Input, Button, notification } from 'antd';\nimport './App.css';\nimport $ from 'jquery';\nimport 'platform'\nimport platform from 'platform';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport {getParameterByName, getRedirect, checkLogin} from './tool';\n\nfunction App(props) {\n  const recaptchaRef = React.useRef();\n  \n\n  const onFinish = async (values) => {\n    values.token = await recaptchaRef.current.executeAsync();\n    recaptchaRef.current.reset();\n    // console.log\n    console.log(\"Success: \", values);\n    $.ajax({\n      type: 'POST',\n      url: 'https://sv-communityadvocates.org/api/react/login/',\n      data: values,\n      error: function(response){\n          console.log(\"Error:\",response);\n          notification[\"error\"]({\n            message: 'Login failed',\n            description:\n              'Please check your password and email again',\n          });\n      },\n      success: function(response){\n        \n          if (response.status == 1){\n              console.log(\"Success!\");\n              \n              localStorage.setItem('token', response.token);\n              notification[\"success\"]({\n                message: 'Login success',\n                description:\n                  'Login successfully!',\n              });\n\n              if (getParameterByName('redirect')){\n                  window.location.replace(getRedirect());\n              } else {\n                window.location.replace(\"/admin/profile/\");\n              }\n          }\n          \n          \n      }\n  });\n  }\n  const onFinishFailed = (error) =>{\n    console.log(\"failed: \", error);\n  }\n\n  useEffect(() =>{\n    checkLogin();\n  },[])\n  return (\n    <div>\n      <div className=\"container login-div \">\n        <h2 className=\"text-center pb-4\">User login</h2>\n        <Form\n          name=\"login\"\n          layout=\"vertical\"\n          initialValues={{\n            device: platform.description\n          }}\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n        >\n          <Form.Item\n            label=\"Username\"\n            name=\"username\"\n            rules={[\n              {\n                required: true,\n                message:'Please inut your username!',\n              },\n            ]}\n          >\n            <Input/>\n          </Form.Item>\n\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            rules={[\n              {\n                required: true,\n                message:'Please inut your password!',\n              },\n            ]}\n          >\n            <Input.Password/>\n          </Form.Item>\n\n          <Form.Item\n            hidden\n            name=\"device\"\n          >\n           <input></input>\n          </Form.Item>\n        \n        <Form.Item\n          // wrapperCol={{\n          //   offset: 8,\n          //   span: 16,\n          // }}\n        >\n          <Button type=\"primary\" htmlType=\"submit\" style={{float:\"right\"}}>\n            Submit\n          </Button>\n        </Form.Item>\n\n        <Form.Item>\n          <p style={{float:\"right\", fontSize:\"large\"}}>or <a href=\"/signup/\">create an account</a></p>\n        </Form.Item>\n\n        </Form>  \n\n        <ReCAPTCHA ref={recaptchaRef} sitekey=\"6Lc_7pMbAAAAAJRcdqCiTkI16SR6MwRUKqsHFR9P\" size=\"invisible\"/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}